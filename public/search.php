<?php
//echo "hello" . "\n";
///**
// * Знаходить у тексті:
// * 1. Слова від 5 до 7 символів.
// * 2. Слова, що зустрічаються від 5 до 10 разів.
// * 3. Слова, які містять "а" і "у".
// */
//
//$text = "Я бачу у вікно громаддя хмар,
//Холодних, білосніжних, як зимою,
//І ніжно-голубе, яскраве небо.
//Осінній день погожий, і на північ
//Відходять хмари. Клени золоті
//І під балконом дві березки білі
//Просвічують на небі всохлим листям.";

//// Результати
//$result = [];
//$currentWord = '';
//
//// Цикл для проходження по кожному символу
//for ($i = 0; $i <= strlen($text); $i++) {
//    $char = $text[$i] ?? '';
//
//    // Якщо це літера або дефіс, додаємо до слова
//    if (ctype_alpha($char) || $char === '-') {
//        $currentWord .= $char;
//    } else {
//        // Якщо це не літера, перевіряємо слово
//        if (strlen($currentWord) >= 5 && strlen($currentWord) <= 7) {
//            $result[] = $currentWord; // Додаємо слово до результату
//        }
//        $currentWord = ''; // Скидаємо слово
//    }
//}

//// Вивід результатів
//echo "Слова довжиною від 5 до 7 символів:\n";
//foreach ($result as $word) {
//    echo $word . "\n";
//}

echo "hello\n";
/**
 * Знаходить у тексті:
 * 1. Слова від 5 до 7 символів.
 * 2. Слова, що зустрічаються від 5 до 10 разів.
 * 3. Слова, які містять "а" і "у".
 */

$text = "Я бачу у вікно громаддя хмар, 
Холодних, білосніжних, як зимою, 
І ніжно-голубе, яскраве небо. 
Осінній день погожий, і на північ 
Відходять хмари. Клени золоті 
І під балконом дві березки білі 
Просвічують на небі всохлим листям.";

// Результати
$result = [];
$currentWord = '';

// Цикл для проходження по кожному символу
for ($i = 0; $i <= mb_strlen($text); $i++) {
    $char = mb_substr($text, $i, 1);

    // Якщо це літера або дефіс, додаємо до слова
    if (preg_match('/[а-яА-ЯёЁіІїЇєЄґҐa-zA-Z-]/u', $char)) {
        $currentWord .= $char;
    } else {
        // Якщо це не літера, перевіряємо слово
        if (mb_strlen($currentWord) >= 5 && mb_strlen($currentWord) <= 7) {
            $result[] = $currentWord; // Додаємо слово до результату
        }
        $currentWord = ''; // Скидаємо слово
    }
}

// Вивід результатів
echo "Слова довжиною від 5 до 7 символів:\n";
foreach ($result as $word) {
    echo  "<br>" . $word . "\n" ;
}
echo  "<br>";
echo  "-----------------------------------------------------";
echo  "<br>";


echo "24.01.2025". "<br>";

echo "hello\n";

// Вхідний текст
$text = "Я бачу у вікно громаддя хмар,
Холодних, білосніжних, як зимою,
І ніжно-голубе, яскраве небо.
Осінній день погожий, і на північ
Відходять хмари. Клени золоті
І під балконом дві березки білі
Просвічують на небі всохлим листям.";

// Масив для результатів
$result = [];
$currentWord = ''; // Поточне слово

// Ітерація по кожному байту тексту
$i = 0;
while (isset($text[$i])) {
    $byte = $text[$i]; // Поточний байт
    $byteValue = ord($byte); // Значення байта

    // Перевіряємо, чи це початок багатобайтового символу (UTF-8)
    if (($byteValue & 0xC0) === 0xC0) {
        // Початок багатобайтового символу, зберігаємо його як частину символу
        $char = $byte;
        $i++;
        while (isset($text[$i]) && (ord($text[$i]) & 0xC0) === 0x80) {
            $char .= $text[$i];
            $i++;
        }
        $i--; // Повертаємося до останнього байта символу
    } else {
        // Однобайтовий символ
        $char = $byte;
    }

    // Перевіряємо, чи це літера кирилиці
    if (
        ($char >= 'а' && $char <= 'я') || ($char >= 'А' && $char <= 'Я') ||
        $char === 'і' || $char === 'І' || $char === 'ї' || $char === 'Ї' ||
        $char === 'є' || $char === 'Є' || $char === 'ґ' || $char === 'Ґ'
    ) {
        // Додаємо символ до поточного слова
        $currentWord .= $char;
    } else {
        // Якщо слово закінчилося
        if ($currentWord !== '') {
            // Ручний підрахунок довжини слова
            $wordLength = 0;
            $j = 0;
            while (isset($currentWord[$j])) {
                $charByteValue = ord($currentWord[$j]);
                if (($charByteValue & 0xC0) !== 0x80) {
                    $wordLength++;
                }
                $j++;
            }

            // Перевірка довжини слова
            if ($wordLength >= 5 && $wordLength <= 7) {
                $result[] = $currentWord;
            }
        }

        // Скидання поточного слова
        $currentWord = '';
    }

    $i++;
}

// Перевірка останнього слова
if ($currentWord !== '') {
    $wordLength = 0;
    $j = 0;
    while (isset($currentWord[$j])) {
        $charByteValue = ord($currentWord[$j]);
        if (($charByteValue & 0xC0) !== 0x80) {
            $wordLength++;
        }
        $j++;
    }

    if ($wordLength >= 5 && $wordLength <= 7) {
        $result[] = $currentWord;
    }
}

// Виведення результатів
if (!empty($result)) {
    echo "Слова довжиною від 5 до 7 символів:\n";
    foreach ($result as $word) {
        echo "<br>" . $word . "\n";
    }
} else {
    echo "Слова не знайдено.\n";
}
echo "------------------------"."<br>";


echo "hello\n";

// Вхідний текст
$text = "Я бачу у вікно громаддя хмар,
Холодних, білосніжних, як зимою,
І ніжно-голубе, яскраве небо.
Осінній день погожий, і на північ
Відходять хмари. Клени золоті
І під балконом дві березки білі
Просвічують на небі всохлим листям.";

// Масив для результатів
$result = [];
$currentWord = ''; // Поточне слово
$index = 0;        // Індекс для побайтового читання
$textLength = 0;   // Довжина тексту

// Ручний підрахунок довжини тексту
while (isset($text[$textLength])) {
    $textLength++;
}

// Виведемо довжину тексту
echo "Довжина тексту: $textLength\n";

// Основний цикл для обробки тексту
while ($index < $textLength) {
    // Поточний символ
    $char = $text[$index];

    // Діагностичний вивід поточного символу
    echo "Поточний символ: '$char'\n";

    // Перевіряємо, чи це літера кирилиці або дефіс
    if (
        ($char >= 'а' && $char <= 'я') || ($char >= 'А' && $char <= 'Я') ||
        $char === 'і' || $char === 'І' || $char === 'ї' || $char === 'Ї' ||
        $char === 'є' || $char === 'Є' || $char === 'ґ' || $char === 'Ґ' ||
        $char === '-'
    ) {
        // Якщо символ є частиною слова, додаємо до поточного слова
        $currentWord .= $char;

        // Виведення поточного слова для діагностики
        echo "Поточне слово: '$currentWord'\n";
    } else {
        // Якщо символ не є частиною слова
        if ($currentWord !== '') {
            // Ручний підрахунок довжини слова
            $wordLength = 0;
            $i = 0;
            while (isset($currentWord[$i])) {
                $wordLength++;
                $i++;
            }

            // Діагностичний вивід довжини слова
            echo "Довжина слова '$currentWord': $wordLength\n";

            // Перевірка довжини слова
            if ($wordLength >= 5 && $wordLength <= 7) {
                // Додаємо слово в результати
                $result[] = $currentWord;
            }

            // Скидаємо поточне слово
            $currentWord = '';
        }
    }

    $index++; // Переходимо до наступного символу
}

// Перевірка останнього слова (якщо текст закінчився на літеру)
if ($currentWord !== '') {
    $wordLength = 0;
    $i = 0;
    while (isset($currentWord[$i])) {
        $wordLength++;
        $i++;
    }

    if ($wordLength >= 5 && $wordLength <= 7) {
        $result[] = $currentWord;
    }
}

// Виведення результатів
if (!empty($result)) {
    echo "Слова довжиною від 5 до 7 символів:\n";
    foreach ($result as $word) {
        echo $word . "\n";
    }
} else {
    echo "Слова не знайдено.\n";
}
